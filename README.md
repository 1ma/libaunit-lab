# libaunit-lab

A toy project to explore the [AUnit](https://github.com/AdaCore/aunit) testing framework.

## Build

`$ gprbuild -f -p -P harness`

## Run

```
$ ./bin/harness

OK Calcul Unit Tests : Test Suma function
OK Calcul Unit Tests : Test Divisio function

Total Tests Run:   2
Successful Tests:  2
Failed Assertions: 0
Unexpected Errors: 0
```

## Flags

All these flags are autogenerated by default by [Alire](https://github.com/alire-project/alire), except `-O0` which was
originally `-O2`, but I don't see how it makes sense with the `-g` flag.

| Flag | Meaning |
|------|---------|
| -j0 | Compile using all cores |
| -g | Compile with debugging symbols |
| -gnatVa | Turn on all validity checks |
| -gnatwa | Turn on most (wtf?) optional warnings |
| -O0 | Disable all optimizations |
| -gnata | Enable assertions |
| -gnato | Enable overflow checks in strictest mode, even on intermediate calculations |
| -fstack-check | Enable stack overflow checks |
| -Es | Store tracebacks in exception occurrences when the target supports it. Whatever that means. |

### References

* https://gcc.gnu.org/onlinedocs/gnat_ugn/Switches-for-gnatbind.html
* https://gcc.gnu.org/onlinedocs/gnat_ugn/Switches-for-gnatmake.html
